#!/usr/bin/env python3\n"""Complete HTTP-fixed AI Team Router with all enhancements."""\n\n# ... [previous content remains exactly the same until the route_request method]\n\n            # Use improved HTTP client\n            result = self.ollama_client.generate(\n                model_id=member.model_id,\n                prompt=prompt,\n                timeout=model_timeout,\n                options={\n                    \"temperature\": context.get(\"temperature\", 0.7),\n                    \"num_ctx\": min(member.context_tokens, 32768)\n                }\n            )\n            \n            if result[\"success\"]:\n                elapsed = time.time() - start_time\n                return {\n                    \"response\": result[\"response\"],\n                    \"metadata\": {\n                        \"model\": member.model_id,\n                        \"member\": member.name,\n                        \"elapsed_time\": elapsed,\n                        \"http_elapsed_time\": result.get(\"elapsed_time\", 0),\n                        \"requirements\": requirements if 'requirements' in locals() else {}\n                    }\n                }\n            else:\n                logger.error(f\"Model {member_id} failed: {result.get('error', 'Unknown error')}\")\n                return {\n                    \"response\": \"Request failed - please try again\",\n                    \"metadata\": {\n                        \"error\": result.get(\"error\", \"Unknown error\"),\n                        \"model\": member.model_id,\n                        \"member\": member.name,\n                        \"elapsed_time\": result.get(\"elapsed_time\", 0)\n                    }\n                }\n                \n        except Exception as e:\n            logger.error(f\"Router error: {e}\")\n            return {\n                \"response\": \"Router error occurred\",\n                \"metadata\": {\n                    \"error\": str(e),\n                    \"elapsed_time\": time.time() - start_time\n                }\n            }